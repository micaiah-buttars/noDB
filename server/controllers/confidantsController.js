let confidants = [
    {
        id: 0,
        title: "Fool",
        name: "Prison Master",
        rank: 0,
        cardUrl: "https://vignette.wikia.nocookie.net/megamitensei/images/0/0b/P5_Fool_arcana_cooperation.png/revision/latest?cb=20160915143157",
    },
    {
        id: 1,
        title: "Magician",
        name: "Morgana",
        rank: 0,
        cardUrl: "https://vignette.wikia.nocookie.net/megamitensei/images/e/e6/P5_Magician_arcana_cooperation.png/revision/latest?cb=20160915143227",
    },
    {
        id: 2,
        title: "Priestess",
        name: "Makoto Nijima",
        rank: 0,
        cardUrl: "https://vignette.wikia.nocookie.net/megamitensei/images/c/c2/P5_Priestess_arcana_cooperation.png/revision/latest?cb=20160915143305",
    },
    {
        id: 3,
        title: "Empress",
        name: "Haru Okumura",
        rank: 0,
        cardUrl: "https://vignette.wikia.nocookie.net/megamitensei/images/5/52/P5_Empress_arcana_cooperation.png/revision/latest?cb=20160915143515",
    },
    {
        id: 4,
        title: "Emperor",
        name: "Yusuke Kitagawa",
        rank: 0,
        cardUrl: "https://vignette.wikia.nocookie.net/megamitensei/images/8/86/P5_Emperor_arcana_cooperation.png/revision/latest?cb=20160915143531",
    },
    {
        id: 5,
        title: "Hierophant",
        name: "Sojiro Sakura",
        rank: 0,
        cardUrl: "https://vignette.wikia.nocookie.net/megamitensei/images/d/d8/P5_Hierophant_Arcana.png/revision/latest?cb=20160728020650",
    },
    {
        id: 6,
        title: "Lovers",
        name: "Ann Takamaki",
        rank: 0,
        cardUrl: "https://vignette.wikia.nocookie.net/megamitensei/images/4/4b/P5_Lover_arcana_cooperation.png/revision/latest?cb=20160915143551",
    },
    {
        id: 7,
        title: "Chariot",
        name: "Ryuji Sakamoto",
        rank: 0,
        cardUrl: "https://vignette.wikia.nocookie.net/megamitensei/images/e/eb/P5_Chariot_arcana_cooperation.png/revision/latest?cb=20160915143624",
    },
    {
        id: 8,
        title: "Strength",
        name: "Twin Wardens",
        rank: 0,
        cardUrl: "https://vignette.wikia.nocookie.net/megamitensei/images/0/02/P5_Strength_Arcana.png/revision/latest?cb=20160916144526",
    },
    {
        id: 9,
        title: "Hermit",
        name: "Futaba Sakura",
        rank: 0,
        cardUrl: "https://vignette.wikia.nocookie.net/megamitensei/images/5/57/P5_Hermit_Arcana.png/revision/latest?cb=20160916144512",
    },
    {
        id: 10,
        title: "Fortune",
        name: "Chihaya Mifune",
        rank: 0,
        cardUrl: "https://vignette.wikia.nocookie.net/megamitensei/images/6/6a/P5_Wheel_of_Fortune_Arcana.png/revision/latest?cb=20160728020952",
    },
    {
        id: 11,
        title: "Justice",
        name: "Goro Akechi",
        rank: 0,
        cardUrl: "https://vignette.wikia.nocookie.net/megamitensei/images/2/26/P5_Justice_Arcana.png/revision/latest?cb=20160916144454",
    },
    {
        id: 12,
        title: "Hanged Man",
        name: "Iwai Munehisa",
        rank: 0,
        cardUrl: "https://vignette.wikia.nocookie.net/megamitensei/images/a/a1/P5_Hanged-Man_Arcana.png/revision/latest?cb=20160728021156",
    },
    {
        id: 13,
        title: "Death",
        name: "Tae Takemi",
        rank: 0,
        cardUrl: "https://vignette.wikia.nocookie.net/megamitensei/images/a/a2/P5_Death_Arcana.png/revision/latest?cb=20160728021302",
    },
    {
        id: 14,
        title: "Temerance",
        name: "Sadayo Kawakami",
        rank: 0,
        cardUrl: "https://vignette.wikia.nocookie.net/megamitensei/images/f/f4/P5_Temperance_Arcana.png/revision/latest?cb=20160728021415",
    },
    {
        id: 15,
        title: "Devil",
        name: "Ichiko Ohya",
        rank: 0,
        cardUrl: "https://vignette.wikia.nocookie.net/megamitensei/images/5/55/P5_Devil_Arcana.png/revision/latest?cb=20160728021505&format=original",
    },
    {
        id: 16,
        title: "Tower",
        name: "Shinya Oda",
        rank: 0,
        cardUrl: "https://vignette.wikia.nocookie.net/megamitensei/images/3/3e/P5_Tower_Arcana.png/revision/latest?cb=20160728021547",
    },
    {
        id: 17,
        title: "Star",
        name: "Hifumi Togo",
        rank: 0,
        cardUrl: "https://vignette.wikia.nocookie.net/megamitensei/images/f/f0/P5_Star_Arcana.png/revision/latest?cb=20161104022713",
    },
    {
        id: 18,
        title: "Moon",
        name: "Yuuki Mishima",
        rank: 0,
        cardUrl: "https://vignette.wikia.nocookie.net/megamitensei/images/3/3d/P5_Moon_Arcana.png/revision/latest?cb=20160728021655",
    },
    {
        id: 19,
        title: "Sun",
        name: "Toranosuke Yoshida",
        rank: 0,
        cardUrl: "https://vignette.wikia.nocookie.net/megamitensei/images/3/38/P5_Sun_Arcana.png/revision/latest?cb=20160728021736",
    },
    {
        id: 20,
        title: "Judgement",
        name: "Sae Nijima",
        rank: 0,
        cardUrl: "https://vignette.wikia.nocookie.net/megamitensei/images/a/ab/P5_Judgement_Arcana.png/revision/latest?cb=20160916144550",
    },
]

let userArr = [...confidants]

module.exports = {
    get: (req, res) => {
        res.send(userArr)
    },

    create: (req, res) => {
        let { title } = req.body
        let foundConfidant = confidants.find((confidant) => {
            return confidant.title === title
        })
        let userCheck = userArr.find((confidant) => {
            return confidant.title === title
        })

        if(!foundConfidant){
            res.status(404).send(console.log("Confidant Not Found"))
        } else if(userCheck){
            res.status(409).send(console.log("Confidant is Already In List"))
        } else if(foundConfidant && !userCheck){
            userArr.push(foundConfidant)
            res.status(200).send(userArr)
        }
    },

    update: (req, res) => {
        let {id} = req.params
        let index = userArr.findIndex(confidant => +confidant.id === +id)
        

        let updatedConfidant = {
            id: userArr[index].id,
            title: userArr[index].title,
            name: userArr[index].name,
            rank: userArr[index].rank + 1,
            cardUrl: userArr[index].cardUrl
        }

        userArr.splice(index, 1, updatedConfidant)
        res.send(userArr)
    },


    delete: (req, res) => {
        let { id } = req.params
        let index = userArr.findIndex(confidant => +confidant.id === +id)

        userArr.splice(index, 1)
        res.send(userArr)

    }
}

